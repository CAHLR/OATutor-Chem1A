{"ast":null,"code":"import _regeneratorRuntime from\"/Users/allisonwang/Downloads/chem-final/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/allisonwang/Downloads/chem-final/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createClass from\"/Users/allisonwang/Downloads/chem-final/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/Users/allisonwang/Downloads/chem-final/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import localforage from\"localforage\";var BrowserStorage=/*#__PURE__*/_createClass(/**\n     * @private\n     * @param key\n     * @return {*}\n     */ /**\n     * @private\n     * @return {*}\n     */function BrowserStorage(app){var _this=this;_classCallCheck(this,BrowserStorage);this.getCtxByKey=function(key){return _this._app['state']['additionalContext'][key];};this.noRestore=function(){return _this.getCtxByKey('noRestore');};this.removeByKey=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(key){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",localforage.removeItem(key));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();this.getKeys=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",!_this.noRestore()&&localforage.keys());case 1:case\"end\":return _context2.stop();}}},_callee2);}));this.getByKey=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(key){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",!_this.noRestore()&&localforage.getItem(key));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();this.setByKey=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(key,value,callback){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.debug('setting key',key,'to value',value);return _context4.abrupt(\"return\",localforage.setItem(key,value,callback));case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3,_x4,_x5){return _ref4.apply(this,arguments);};}();this._app=app;});export default BrowserStorage;","map":{"version":3,"names":["localforage","BrowserStorage","app","getCtxByKey","key","_app","noRestore","removeByKey","removeItem","getKeys","keys","getByKey","getItem","setByKey","value","callback","console","debug","setItem"],"sources":["/Users/allisonwang/Downloads/chem-final/OATutor-Chem1A/src/util/browserStorage.js"],"sourcesContent":["import localforage from \"localforage\";\n\nclass BrowserStorage {\n    /**\n     * @private\n     * @param key\n     * @return {*}\n     */\n    getCtxByKey = (key) => this._app['state']['additionalContext'][key]\n\n    /**\n     * @private\n     * @return {*}\n     */\n    noRestore = () => this.getCtxByKey('noRestore')\n    /**\n     * @private\n     */\n    _app;\n\n    constructor(app) {\n        this._app = app\n    }\n\n    removeByKey = async key => localforage.removeItem(key)\n    getKeys = async () =>  !this.noRestore() && localforage.keys()\n    getByKey = async key => !this.noRestore() && localforage.getItem(key)\n    /**\n     *\n     * @param key\n     * @param value\n     * @param [callback]\n     * @return {Promise<*>}\n     */\n    setByKey = async (key, value, callback) => {\n        console.debug('setting key', key, 'to value', value)\n        return localforage.setItem(key, value, callback)\n    }\n}\n\nexport default BrowserStorage\n"],"mappings":"8jBAAA,MAAOA,YAAP,KAAwB,aAAxB,C,GAEMC,e,2BACF;AACJ;AACA;AACA;AACA,O,CAGI;AACJ;AACA;AACA,OAOI,wBAAYC,GAAZ,CAAiB,0DAZjBC,WAYiB,CAZH,SAACC,GAAD,QAAS,MAAI,CAACC,IAAL,CAAU,OAAV,EAAmB,mBAAnB,EAAwCD,GAAxC,CAAT,EAYG,MANjBE,SAMiB,CANL,iBAAM,MAAI,CAACH,WAAL,CAAiB,WAAjB,CAAN,EAMK,MAIjBI,WAJiB,4FAIH,iBAAMH,GAAN,oJAAaJ,WAAW,CAACQ,UAAZ,CAAuBJ,GAAvB,CAAb,wDAJG,oEAKjBK,OALiB,wEAKP,2KAAa,CAAC,KAAI,CAACH,SAAL,EAAD,EAAqBN,WAAW,CAACU,IAAZ,EAAlC,0DALO,QAMjBC,QANiB,6FAMN,kBAAMP,GAAN,yJAAa,CAAC,KAAI,CAACE,SAAL,EAAD,EAAqBN,WAAW,CAACY,OAAZ,CAAoBR,GAApB,CAAlC,0DANM,sEAcjBS,QAdiB,6FAcN,kBAAOT,GAAP,CAAYU,KAAZ,CAAmBC,QAAnB,wHACPC,OAAO,CAACC,KAAR,CAAc,aAAd,CAA6Bb,GAA7B,CAAkC,UAAlC,CAA8CU,KAA9C,EADO,iCAEAd,WAAW,CAACkB,OAAZ,CAAoBd,GAApB,CAAyBU,KAAzB,CAAgCC,QAAhC,CAFA,0DAdM,yEACb,KAAKV,IAAL,CAAYH,GAAZ,CACH,C,EAkBL,cAAeD,eAAf"},"metadata":{},"sourceType":"module"}