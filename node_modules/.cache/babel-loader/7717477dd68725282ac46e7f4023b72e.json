{"ast":null,"code":"import _objectSpread from\"/Users/songwang/allison/chem/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/songwang/allison/chem/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/Users/songwang/allison/chem/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/songwang/allison/chem/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/songwang/allison/chem/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/songwang/allison/chem/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/songwang/allison/chem/OATutor-Chem1A/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{createRef}from\"react\";import Grid from\"@material-ui/core/Grid\";import TextField from\"@material-ui/core/TextField\";import MultipleChoice from\"./MultipleChoice\";import GridInput from\"./GridInput\";import MatrixInput from\"./MatrixInput\";import{renderText}from\"../../platform-logic/renderText\";import clsx from\"clsx\";import\"mathlive\";import'./ProblemInput.css';import{shuffleArray}from\"../../util/shuffleArray\";import{EQUATION_EDITOR_AUTO_COMMANDS,EQUATION_EDITOR_AUTO_OPERATORS,ThemeContext}from\"../../config/config\";import{stagingProp}from\"../../util/addStagingProperty\";import{parseMatrixTex}from\"../../util/parseMatrixTex\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProblemInput=/*#__PURE__*/function(_React$Component){_inherits(ProblemInput,_React$Component);var _super=_createSuper(ProblemInput);function ProblemInput(props){var _this;_classCallCheck(this,ProblemInput);_this=_super.call(this,props);_this.handleFocus=function(){_this.setState({isMathFieldFocused:true});console.log('MathField is focused');};_this.handleBlur=function(){_this.setState({isMathFieldFocused:false});console.log('MathField lost focus');};_this.handleClickOutside=function(event){var mathField=_this.mathFieldRef.current;if(mathField&&!mathField.contains(event.target)&&_this.state.isMathFieldFocused){console.log('Clicked outside keyboard');}};_this.equationRef=/*#__PURE__*/createRef();_this.mathFieldRef=/*#__PURE__*/React.createRef();_this.onEquationChange=_this.onEquationChange.bind(_assertThisInitialized(_this));_this.state={value:\"\",isMathFieldFocused:false};return _this;}_createClass(ProblemInput,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$equationRef,_this$equationRef$cur,_this$equationRef2,_this$equationRef2$cu;document.addEventListener('click',this.handleClickOutside);console.debug('problem',this.props.step,'seed',this.props.seed);if(this.isMatrixInput()){console.log('automatically determined matrix input to be the correct problem type');}var mqDisplayArea=(_this$equationRef=this.equationRef)===null||_this$equationRef===void 0?void 0:(_this$equationRef$cur=_this$equationRef.current)===null||_this$equationRef$cur===void 0?void 0:_this$equationRef$cur.querySelector(\".mq-editable-field > .mq-root-block\");if(mqDisplayArea!=null){mqDisplayArea.ariaHidden=true;}var textareaEl=(_this$equationRef2=this.equationRef)===null||_this$equationRef2===void 0?void 0:(_this$equationRef2$cu=_this$equationRef2.current)===null||_this$equationRef2$cu===void 0?void 0:_this$equationRef2$cu.querySelector(\".mq-textarea > textarea\");if(textareaEl!=null){textareaEl.ariaLabel=\"Answer question number \".concat(this.props.index,\" here\");}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(_,prevState){if(prevState.isMathFieldFocused!==this.state.isMathFieldFocused&&!this.state.isMathFieldFocused){var mathField=this.mathFieldRef.current;if(mathField){mathField.executeCommand('hideVirtualKeyboard');console.log(\"componentDidUpdate hide keyboard\");}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('click',this.handleClickOutside);}},{key:\"isMatrixInput\",value:function isMatrixInput(){var _this$props$step,_this$props$step3;if((_this$props$step=this.props.step)!==null&&_this$props$step!==void 0&&_this$props$step.stepAnswer){var _this$props$step2;return((_this$props$step2=this.props.step)===null||_this$props$step2===void 0?void 0:_this$props$step2.problemType)!==\"MultipleChoice\"&&/\\\\begin{[a-zA-Z]?matrix}/.test(this.props.step.stepAnswer[0]);}if((_this$props$step3=this.props.step)!==null&&_this$props$step3!==void 0&&_this$props$step3.hintAnswer){var _this$props$step4;return((_this$props$step4=this.props.step)===null||_this$props$step4===void 0?void 0:_this$props$step4.problemType)!==\"MultipleChoice\"&&/\\\\begin{[a-zA-Z]?matrix}/.test(this.props.step.hintAnswer[0]);}}},{key:\"onEquationChange\",value:function onEquationChange(eq){var _this$equationRef3,_this$equationRef4,_this$equationRef4$cu,_this$equationRef5,_this$equationRef5$cu;var containerEl=(_this$equationRef3=this.equationRef)===null||_this$equationRef3===void 0?void 0:_this$equationRef3.current;var eqContentEl=(_this$equationRef4=this.equationRef)===null||_this$equationRef4===void 0?void 0:(_this$equationRef4$cu=_this$equationRef4.current)===null||_this$equationRef4$cu===void 0?void 0:_this$equationRef4$cu.querySelector(\".mq-editable-field\");var textareaEl=(_this$equationRef5=this.equationRef)===null||_this$equationRef5===void 0?void 0:(_this$equationRef5$cu=_this$equationRef5.current)===null||_this$equationRef5$cu===void 0?void 0:_this$equationRef5$cu.querySelector(\".mq-textarea > textarea\");if(textareaEl!=null){// console.debug(\"not null!\", textareaEl)\ntextareaEl.ariaLabel=\"The current value is: \".concat(eq,\". Answer question number \").concat(this.props.index,\" here.\");}if(containerEl!=null&&eqContentEl!=null){var eqContainer=eqContentEl.querySelector(\"*[mathquill-block-id]\");if(eqContainer!=null){var tallestEqElement=Math.max.apply(Math,_toConsumableArray(Array.from(eqContainer.childNodes.values()).map(function(el){return el.offsetHeight;})));var newHeight=Math.max(tallestEqElement+20,50);containerEl.style.height=\"\".concat(newHeight,\"px\");eqContainer.style.height=\"\".concat(newHeight,\"px\");}}this.props.setInputValState(eq);}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,state=_this$props.state,index=_this$props.index,showCorrectness=_this$props.showCorrectness,allowRetry=_this$props.allowRetry,variabilization=_this$props.variabilization;var _this$context=this.context,use_expanded_view=_this$context.use_expanded_view,debug=_this$context.debug;var _this$props$step5=this.props.step,problemType=_this$props$step5.problemType,stepAnswer=_this$props$step5.stepAnswer,hintAnswer=_this$props$step5.hintAnswer,units=_this$props$step5.units;var keepMCOrder=this.props.keepMCOrder;var keyboardType=this.props.keyboardType;var problemAttempted=state.isCorrect!=null;var correctAnswer=Array.isArray(stepAnswer)?stepAnswer[0]:hintAnswer[0];var disableInput=problemAttempted&&!allowRetry;if(this.isMatrixInput()){problemType=\"MatrixInput\";}try{window.mathVirtualKeyboard.layouts=[keyboardType];}catch(_unused){window.mathVirtualKeyboard.layouts=[\"default\"];}return/*#__PURE__*/_jsxs(Grid,{container:true,spacing:0,justifyContent:\"center\",alignItems:\"center\",className:clsx(disableInput&&'disable-interactions'),children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:1,md:problemType===\"TextBox\"?4:false}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:9,md:problemType===\"TextBox\"?3:12,children:[problemType===\"TextBox\"&&this.props.step.answerType!==\"string\"&&/*#__PURE__*/_jsx(\"math-field\",{ref:this.mathFieldRef,\"math-virtual-keyboard-policy\":\"sandboxed\",onFocus:this.handleFocus,onBlur:this.handleBlur,onInput:function onInput(evt){return _this2.props.setInputValState(evt.target.value);},style:{\"display\":\"block\"},value:use_expanded_view&&debug?correctAnswer:state.inputVal,onChange:this.onEquationChange,autoCommands:EQUATION_EDITOR_AUTO_COMMANDS,autoOperatorNames:EQUATION_EDITOR_AUTO_OPERATORS}),problemType===\"TextBox\"&&this.props.step.answerType===\"string\"&&/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({ref:this.textFieldRef,inputProps:{min:0,style:{textAlign:'center'},\"aria-label\":\"Enter a response to the question above\"}},stagingProp({\"data-selenium-target\":\"string-answer-\".concat(index)})),{},{error:showCorrectness&&state.isCorrect===false,className:classes.inputField,variant:\"outlined\",onChange:function onChange(evt){return _this2.props.editInput(evt);},onKeyPress:function onKeyPress(evt){return _this2.props.handleKey(evt);},InputProps:{classes:{notchedOutline:showCorrectness&&state.isCorrect!==false&&state.usedHints?classes.muiUsedHint:null}}},use_expanded_view&&debug?{defaultValue:correctAnswer}:{})),problemType===\"TextBox\"&&this.props.step.answerType===\"short-essay\"&&/*#__PURE__*/_jsx(\"textarea\",{className:\"short-essay-input\",onChange:function onChange(evt){return _this2.props.editInput(evt);},onKeyPress:function onKeyPress(evt){return _this2.props.handleKey(evt);}}),problemType===\"MultipleChoice\"&&keepMCOrder?/*#__PURE__*/_jsx(MultipleChoice,_objectSpread(_objectSpread({onChange:function onChange(evt){return _this2.props.editInput(evt);},choices:_toConsumableArray(this.props.step.choices).reverse(),index:index},use_expanded_view&&debug?{defaultValue:correctAnswer}:{}),{},{variabilization:variabilization})):problemType===\"MultipleChoice\"&&/*#__PURE__*/_jsx(MultipleChoice,_objectSpread(_objectSpread({onChange:function onChange(evt){return _this2.props.editInput(evt);},choices:shuffleArray(this.props.step.choices,this.props.seed),index:index},use_expanded_view&&debug?{defaultValue:correctAnswer}:{}),{},{variabilization:variabilization})),problemType===\"GridInput\"&&/*#__PURE__*/_jsx(GridInput,_objectSpread({onChange:function onChange(newVal){return _this2.props.setInputValState(newVal);},numRows:this.props.step.numRows,numCols:this.props.step.numCols,context:this.props.context,classes:this.props.classes,index:index},use_expanded_view&&debug?{defaultValue:parseMatrixTex(correctAnswer)[0]}:{})),problemType===\"MatrixInput\"&&/*#__PURE__*/_jsx(MatrixInput,_objectSpread({onChange:function onChange(newVal){return _this2.props.setInputValState(newVal);},numRows:this.props.step.numRows,numCols:this.props.step.numCols,context:this.props.context,classes:this.props.classes,index:index},use_expanded_view&&debug?{defaultValue:parseMatrixTex(correctAnswer)[0]}:{}))]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,md:1,children:/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"20%\"},children:units&&renderText(units,this.context.problemID,variabilization,this.context)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:false,md:problemType===\"TextBox\"?3:false})]});}}]);return ProblemInput;}(React.Component);ProblemInput.contextType=ThemeContext;export default ProblemInput;","map":{"version":3,"names":["React","createRef","Grid","TextField","MultipleChoice","GridInput","MatrixInput","renderText","clsx","shuffleArray","EQUATION_EDITOR_AUTO_COMMANDS","EQUATION_EDITOR_AUTO_OPERATORS","ThemeContext","stagingProp","parseMatrixTex","ProblemInput","props","handleFocus","setState","isMathFieldFocused","console","log","handleBlur","handleClickOutside","event","mathField","mathFieldRef","current","contains","target","state","equationRef","onEquationChange","bind","value","document","addEventListener","debug","step","seed","isMatrixInput","mqDisplayArea","querySelector","ariaHidden","textareaEl","ariaLabel","index","_","prevState","executeCommand","removeEventListener","stepAnswer","problemType","test","hintAnswer","eq","containerEl","eqContentEl","eqContainer","tallestEqElement","Math","max","Array","from","childNodes","values","map","el","offsetHeight","newHeight","style","height","setInputValState","classes","showCorrectness","allowRetry","variabilization","context","use_expanded_view","units","keepMCOrder","keyboardType","problemAttempted","isCorrect","correctAnswer","isArray","disableInput","window","mathVirtualKeyboard","layouts","answerType","evt","inputVal","textFieldRef","min","textAlign","inputField","editInput","handleKey","notchedOutline","usedHints","muiUsedHint","defaultValue","choices","reverse","newVal","numRows","numCols","marginLeft","problemID","Component","contextType"],"sources":["/Users/songwang/allison/chem/OATutor-Chem1A/src/components/problem-input/ProblemInput.js"],"sourcesContent":["import React, { createRef } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MultipleChoice from \"./MultipleChoice\";\nimport GridInput from \"./GridInput\";\nimport MatrixInput from \"./MatrixInput\";\nimport { renderText } from \"../../platform-logic/renderText\";\nimport clsx from \"clsx\";\nimport \"mathlive\";\nimport './ProblemInput.css'\nimport { shuffleArray } from \"../../util/shuffleArray\";\nimport { EQUATION_EDITOR_AUTO_COMMANDS, EQUATION_EDITOR_AUTO_OPERATORS, ThemeContext } from \"../../config/config\";\nimport { stagingProp } from \"../../util/addStagingProperty\";\nimport { parseMatrixTex } from \"../../util/parseMatrixTex\";\n\nclass ProblemInput extends React.Component {\n    static contextType = ThemeContext;\n\n    constructor(props) {\n        super(props);\n\n        this.equationRef = createRef()\n\n        this.mathFieldRef = React.createRef();\n\n        this.onEquationChange = this.onEquationChange.bind(this)\n        \n        this.state = {\n            value: \"\",\n            isMathFieldFocused: false,\n        };\n    }\n\n    componentDidMount() {\n        document.addEventListener('click', this.handleClickOutside);\n\n        console.debug('problem', this.props.step, 'seed', this.props.seed)\n        if (this.isMatrixInput()) {\n            console.log('automatically determined matrix input to be the correct problem type')\n        }\n\n        const mqDisplayArea = this.equationRef?.current?.querySelector(\".mq-editable-field > .mq-root-block\")\n        if (mqDisplayArea != null) {\n            mqDisplayArea.ariaHidden = true\n        }\n\n        const textareaEl = this.equationRef?.current?.querySelector(\".mq-textarea > textarea\")\n        if (textareaEl != null) {\n            textareaEl.ariaLabel = `Answer question number ${this.props.index} here`\n        }\n    }\n\n    componentDidUpdate(_, prevState) {\n        if (prevState.isMathFieldFocused !== this.state.isMathFieldFocused && !this.state.isMathFieldFocused) {\n            const mathField = this.mathFieldRef.current;\n        if (mathField) {\n            mathField.executeCommand('hideVirtualKeyboard');\n            console.log(\"componentDidUpdate hide keyboard\")\n        }}\n    }\n    \n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClickOutside);\n    }\n    \n    handleFocus = () => {\n        this.setState({ isMathFieldFocused: true });\n        console.log('MathField is focused');\n    };\n    \n    handleBlur = () => {\n        this.setState({ isMathFieldFocused: false });\n        console.log('MathField lost focus');\n    };\n    \n    handleClickOutside = (event) => {\n        const mathField = this.mathFieldRef.current;\n        if (\n          mathField &&\n          !mathField.contains(event.target) &&\n          this.state.isMathFieldFocused\n        ) {\n          console.log('Clicked outside keyboard');\n        }\n    };\n\n    isMatrixInput() {\n        if (this.props.step?.stepAnswer) {\n            return this.props.step?.problemType !== \"MultipleChoice\" &&\n                /\\\\begin{[a-zA-Z]?matrix}/.test(this.props.step.stepAnswer[0])\n        }\n        if (this.props.step?.hintAnswer) {\n            return this.props.step?.problemType !== \"MultipleChoice\" &&\n                /\\\\begin{[a-zA-Z]?matrix}/.test(this.props.step.hintAnswer[0])\n        }\n    }\n\n    onEquationChange(eq) {\n        const containerEl = this.equationRef?.current\n        const eqContentEl = this.equationRef?.current?.querySelector(\".mq-editable-field\")\n\n        const textareaEl = this.equationRef?.current?.querySelector(\".mq-textarea > textarea\")\n\n        if (textareaEl != null) {\n            // console.debug(\"not null!\", textareaEl)\n            textareaEl.ariaLabel = `The current value is: ${eq}. Answer question number ${this.props.index} here.`\n        }\n\n        if (containerEl != null && eqContentEl != null) {\n            const eqContainer = eqContentEl.querySelector(\"*[mathquill-block-id]\")\n            if (eqContainer != null) {\n                const tallestEqElement = Math.max(...Array.from(eqContainer.childNodes.values()).map(el => el.offsetHeight))\n                const newHeight = Math.max(tallestEqElement + 20, 50)\n\n                containerEl.style.height = `${newHeight}px`;\n                eqContainer.style.height = `${newHeight}px`;\n            }\n        }\n        this.props.setInputValState(eq)\n    }\n\n    render() {\n        const { classes, state, index, showCorrectness, allowRetry, variabilization } = this.props;\n        const { use_expanded_view, debug } = this.context;\n        let { problemType, stepAnswer, hintAnswer, units } = this.props.step;\n        const keepMCOrder = this.props.keepMCOrder;\n        const keyboardType = this.props.keyboardType;\n\n        const problemAttempted = state.isCorrect != null\n        const correctAnswer = Array.isArray(stepAnswer) ? stepAnswer[0] : hintAnswer[0]\n        const disableInput = problemAttempted && !allowRetry\n\n        if (this.isMatrixInput()) {\n            problemType = \"MatrixInput\"\n        }\n        \n        try {\n            window.mathVirtualKeyboard.layouts = [keyboardType];\n        } catch {\n            window.mathVirtualKeyboard.layouts = [\"default\"];\n        }\n\n        return (\n            <Grid container spacing={0} justifyContent=\"center\" alignItems=\"center\"\n                className={clsx(disableInput && 'disable-interactions')}>\n                <Grid item xs={1} md={problemType === \"TextBox\" ? 4 : false}/>\n                <Grid item xs={9} md={problemType === \"TextBox\" ? 3 : 12}>\n                    {(problemType === \"TextBox\" && this.props.step.answerType !== \"string\") && (\n                        <math-field\n                            ref={this.mathFieldRef}\n                            math-virtual-keyboard-policy=\"sandboxed\"\n                            onFocus={this.handleFocus}\n                            onBlur={this.handleBlur}\n                            onInput={evt => this.props.setInputValState(evt.target.value)}\n                            style={{\"display\": \"block\"}}\n                            value={(use_expanded_view && debug) ? correctAnswer : state.inputVal}\n                            onChange={this.onEquationChange}\n                            autoCommands={EQUATION_EDITOR_AUTO_COMMANDS}\n                            autoOperatorNames={EQUATION_EDITOR_AUTO_OPERATORS}\n                        >\n                            </math-field>\n\n                    )}               \n                    {(problemType === \"TextBox\" && this.props.step.answerType === \"string\") && (\n                        <TextField\n                            ref={this.textFieldRef}\n                            inputProps={{\n                                min: 0,\n                                style: { textAlign: 'center' },\n                                \"aria-label\": \"Enter a response to the question above\"\n                            }}\n                            {...stagingProp({\n                                \"data-selenium-target\": `string-answer-${index}`\n                            })}\n                            error={showCorrectness && state.isCorrect === false}\n                            className={classes.inputField}\n                            variant=\"outlined\"\n                            onChange={(evt) => this.props.editInput(evt)}\n                            onKeyPress={(evt) => this.props.handleKey(evt)}\n                            InputProps={{\n                                classes: {\n                                    notchedOutline: ((showCorrectness && state.isCorrect !== false && state.usedHints) ? classes.muiUsedHint : null)\n                                }\n                            }}\n                            {...(use_expanded_view && debug) ? {\n                                defaultValue: correctAnswer\n                            } : {}}\n                        >\n                        </TextField>\n                    )}\n                    {(problemType === \"TextBox\" && this.props.step.answerType === \"short-essay\") && (\n                        <textarea\n                            className=\"short-essay-input\"\n                            onChange={(evt) => this.props.editInput(evt)}\n                            onKeyPress={(evt) => this.props.handleKey(evt)}\n                        >\n                        </textarea>\n                    )}\n                        {(problemType === \"MultipleChoice\" && keepMCOrder) ? (\n                        <MultipleChoice\n                            onChange={(evt) => this.props.editInput(evt)}\n                            choices={[...this.props.step.choices].reverse()}\n                            index={index}\n                            {...(use_expanded_view && debug) ? {\n                                defaultValue: correctAnswer\n                            } : {}}\n                            variabilization={variabilization}\n                        />\n                    ) :\n                    (problemType === \"MultipleChoice\") && (\n                        <MultipleChoice\n                            onChange={(evt) => this.props.editInput(evt)}\n                            choices={shuffleArray(this.props.step.choices, this.props.seed)}\n                            index={index}\n                            {...(use_expanded_view && debug) ? {\n                                defaultValue: correctAnswer\n                            } : {}}\n                            variabilization={variabilization}\n                        />\n                    )}\n                    {problemType === \"GridInput\" && (\n                        <GridInput\n                            onChange={(newVal) => this.props.setInputValState(newVal)}\n                            numRows={this.props.step.numRows}\n                            numCols={this.props.step.numCols}\n                            context={this.props.context}\n                            classes={this.props.classes}\n                            index={index}\n                            {...(use_expanded_view && debug) ? {\n                                defaultValue: parseMatrixTex(correctAnswer)[0]\n                            } : {}}\n                        />\n                    )}\n                    {problemType === \"MatrixInput\" && (\n                        <MatrixInput\n                            onChange={(newVal) => this.props.setInputValState(newVal)}\n                            numRows={this.props.step.numRows}\n                            numCols={this.props.step.numCols}\n                            context={this.props.context}\n                            classes={this.props.classes}\n                            index={index}\n                            {...(use_expanded_view && debug) ? {\n                                defaultValue: parseMatrixTex(correctAnswer)[0]\n                            } : {}}\n                        />\n                    )}\n                </Grid>\n                <Grid item xs={2} md={1}>\n                    <div style={{ marginLeft: \"20%\" }}>\n                        {units && renderText(units, this.context.problemID, variabilization, this.context)}\n                    </div>\n                </Grid>\n                <Grid item xs={false} md={problemType === \"TextBox\" ? 3 : false}/>\n            </Grid>\n        )\n    }\n}\n\nexport default ProblemInput\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}